## 問題の整理の仕方
- **条件の理解・数式化**
    - 数式にすると、数学の手法が使えたり、構造がわかりやすくなったり、考えやすくなる事が圧倒的に多い
    - 小さい値の制約についても、「小さい」という事がどういう働きをするのか考えると良い
    
- **自由度の把握**
    - **問題が定めてるのは何で、自由にしてるのは何・こっちが決定すべきものは何かをなるべく決まった言葉で表す**
        - 今までの問題と違う事・同じ事がわかりやすくなる
- **曖昧な物の排除・簡略化⇔固定化・似た問題を探す**
    - 下記参照
    - 簡略化で無視したい対象が複数ある時、どれからやっても良い
        - 解けそうなの全部解いて、役に立ちそうな帰結を利用
            - 感覚的な話になってしまう...  mergeしやすそうなやつ?実際に考える
    
        
- **こちらの選択に関わらず、一意な物の事前計算・それから言えることの考察**
    - 必ず掛かるコストについて、最初に足してしまう...
    - 操作の中で必ず起こる寄与について、最初に答え/操作の結果に反映してしまう...
    - 一意に決まっているものについて、計算しておく...
        - [例題](https://atcoder.jp/contests/arc090/tasks/arc090_c)
            - 衝突する点と、 点S/T からの距離は一意
            - ここから何が言えるか？
            - 候補点はせいぜい |E| + |V| 個ぐらい
                - 頂点sから距離dの点の列挙、には成功していない
                - sからある頂点への最短経路上にある頂点であって、距離dの点の列挙をしている
                    - 無い頂点を含めて列挙は難しい

    
- **独立な物の分離**
    - 何かしら関係のある物と、関係の無いものを線で結ぶ
        - 関係のある物同士で分離して考える事で構造をよりわかりやすくする目的
        - 関係のある物を線で結んだ時、同じ連結成分に入る物の規則がわからなかったら、それも考える
            - [そういう姿勢が必要な例題](https://atcoder.jp/contests/arc184/tasks/arc184_b)
                - 同時に同時に集合に追加されうる要素を辺で結ぶ
                - 同じ連結成分に入るのは？

- **DAGの発見**
    - 特に最適化において、条件がDAGならば貪欲や全探索を適応できる場合が多い
        - [例題](https://atcoder.jp/contests/abc368/tasks/abc368_e)

- **条件の分離**
一般に、全体についての条件を各要素についての条件に分離するとより条件の整理が進み、解きやすくなる。
    - グラフの頂点全体が→全ての頂点について...の形に書き直す
        - [例題](https://atcoder.jp/contests/arc083/tasks/arc083_c)
    - max = x → 全ての値がx以下、かつ値 = xが存在
    - sum = xのペアがない→ iがあるなら x - iは無い
        - [例題](https://atcoder.jp/contests/arc012/tasks/arc012_3)
    - minの値ごとの制約
        - $\forall$x, x以上の値しかない時、制約...
        - [例題](https://atcoder.jp/contests/typical90/tasks/typical90_cl)
        
    
- 特に難しい条件について、正確に言い換える
    - [例題](https://atcoder.jp/contests/arc012/tasks/arc012_3)
    - 適当に言い換えると容易に誤りを吐く
    - 数学よろしく、同値で結ぶ事を意識
    - 違反しない⇔(個数ok) && (成立してから置かれた、と言うことがない)
    - ⇔(個数おk) && (一手前に、成立していないような盤面が存在)



## 曖昧な物の排除・簡略化⇔固定化・似た問題を探す
::: spoiler 曖昧な物の排除・簡略化の動機
**議論の過程で少しでも非自明な部分があると、先の議論に繋げられないことがある**。https://hackmd.io/tQXoj8C5Qse6jItGq6k9zQ
**よって、問題の答えを求める際に少しでも自明ではない部分があるのなら、その自明ではない部分をまず対処するべき。**
**特に、適当な貪欲→失敗→改善した適当な貪欲→失敗→さらに改善した...
と闇雲に突っ走る前に、まず自明でない部分を詰めるべきである。**
:::

自明でない部分の探し方:
極論、全てが自由なら簡単に解けるはず。より、解けないならば自由でない部分があるはずで、そこの境界が自明になっているか考える
![IMG_3098](https://hackmd.io/_uploads/rkn7U8KXC.jpg)

## "自明ではない"条件とは
**非自明 <------------> 自明**
**抽象的な言葉  <--------->　数学的な式**
である。
**ので、抽象的な言葉の制約は、できるなら数学的な式に変えた方が良い。**

**特に、実際に実験して適当な上界があったりする事を期待する前に、言い換えを試してみるべきである。（時間かかるので)**
<br>


## "自明でない"問題とは
**何もわからない <---- dpで求まる ---- やや正確な言葉で求まる ---> 数式で求まる**


<br><br>

## 曖昧な部分とは
**基本方針 : 議論の過程に、手続きレベルで説明できないことを挟まない。**
https://hackmd.io/SaVGZ7MMQkebN7QUrJnQ8A
### [0]条件であって、非自明・抽象的な言葉で記述されたもの

### [1]oooをうまく選んで、$F(x)$を最大にせよ/うまく選んだ上で最適な操作をした時の、スコアの最大値を求めよ　
- oooを固定した時の最適な操作・スコアの最大値とは？
- oooを固定した時の(一意に定まる)スコアとは？
::: spoiler 動機
これがわからなければ、oooをどのように定めれば良いかという議論が発展しない。
イメージではなく、手続きレベルで答える事。
https://atcoder.jp/contests/arc138/tasks/arc138_c
:::

<br>

### [2]「一般のケースについて解け」という問題であって、特殊ケースであるもの(つまり簡略化)
::: spoiler 動機
$1 \le N, K \le 2 \times 10 ^ 5$について解けという問題において、
$K = 1$などの特殊ケースは一般に解きやすく、またこれすら解けないと話にならない。かつ、このケースを解く事によって、問題の構造の一部が掴めることが多々ある。
::: 
<br>

### [3]複数の問題・制約を混ぜたような問題について、簡略化(制約の無視)/ 固定化(自由度の削減)をしたの問題の解法
::: spoiler 動機
良くある問題 + 追加の制約・条件　の元で解けと言った構造の場合、元の問題の解法をまず詳しく知らないと、追加の制約・条件にも対応することなどとても無理であることが多い。
この場合、元の問題の解法について、「イメージがつく」というレベルを超えて「具体的な手順を言える」というレベルで説明できることが必要となる。
特に、元の問題の貪欲を1つ知っていたとしても、その貪欲の自由度まで把握していないと役に立たない場合も多い。
::: 

- **何かを固定するような簡略化は、「二要素以上が絡み合っている」という状況下において、複雑性の原因となっている物を固定すると良い**
    - 振る舞いを見る事で、関係を明らかにする
    - 簡単な結果が得られれば、もうあとは「固定の仕方」、つまり最初に固定したやつの動きにだけ注目すれば良くなる
### 簡略化の具体例
- パラメータを1点だけ変化させていく時、条件を満たすものを数えよ
    - 解法1: 変化ごとに判定
        - 間に合わない場合がある
    - そのような時: パラメータ変化であって、条件を満たす条件を導きたい
        - 任意のパラメータ変化を考えた時、条件を満たす条件を考える
        - 或いは、条件を満たすパラメータが0になる受験を考える
    - [例題](https://codeforces.com/contest/2018/problem/B)
    - 始点を特定する時、それでも条件を満たすような始点の数は？
        - 始点を特定した時、条件を満たすかどうかが知りたい
            - 毎回シュミレーションするとまにあわない
        - 始点を特定せずに、そもそも「可能な始点とは何か？」について考える
            - ここで始点を固定して考えると意味がない
            - つまり、答え = 0になる条件を考え、答え!= 0ならどこがokかを考える

                - 始点を固定した時: 貪欲ができる
                    - しかし、貪欲のシュミレーションが高速にできない
                        - 進捗はあるものの、答えにつながらないタイプ
                - 可能な始点とは何か？
                    - 答え = 0, 可能な始点 = 0になる条件を考え、そうでない時に可能な始点とは何かについて考える
- 任意のi, jについて成立...→要素数が2の時に、その間で成立する条件を先に考える
    - 綺麗な結果が得られなければ、全探索的なアプローチを取らないといけないかも
        - [例題](https://atcoder.jp/contests/arc048/tasks/arc048_c)
            - まず足2を考える
- パラメータkについて... → k = 1の時は？

- (oo, pp)であって、ppが制約xx(ooに依存)を満たすペア探索せよ・
    - ooを固定した時、制約xxを満たすppが存在する条件を先に解く
        - [例題](https://atcoder.jp/contests/arc004/tasks/arc004_3)
            - nの探索範囲を絞りたい
            - nを固定した時、 xが存在する条件を式で書く
            - nの探索範囲が絞れる

- 構築・最適化せよ。ただし、(制約1)...(制約2)...
    - 制約がそれぞれしかない時を考える
    - 解法をmerge。
    - [例題](https://atcoder.jp/contests/arc049/tasks/arc049_c)
- ワイルドカードがある→ワイルドカードなしを考える
- 情報をクエリで聞ける→全ての情報が明かされている時の答えは？

- 重複がある→重複がない場合の答えは？

- 整列しているとは限らない構築とか→整列している場合の答えは？
    - [例題](https://atcoder.jp/contests/arc181/tasks/arc181_c)

- 存在する・しない物の中で...→存在する・しないの判定を解く
    - 探索的な解だとしても、その探索順に則って今度は本命を求める、など
    
- 集合から、条件を満たす & 要素が素　な部分集合を　k個選ぶ→ 1つ選ぶ時を考える
    - その時の探索を真似る
    - 1つ選ぶ時の貪欲を、2つ選ぶ時にも適応する
        - [例題](https://codeforces.com/contest/1991/problem/F) 

-  3, 4, 5という数字
先ず、1に置き換えて解く。次に、2に置き換えて解く。その上で、3, 4, 5を解く。

- 作れるなら、作り方を示せ
どのようなものなら作れるかの判定問題を先に解く。それによって注目すべき問題と、解法の足がかりを得る。

- 2種類の操作が絡まったような操作
    - 1種類だけの時を解く
        - もしそれが単純に表せたならば: 
            - まず、片方の操作を言い換える
            - もう片方の操作の影響を、言い換えた単純な操作とmergeできないか?
            - a = b xor c + d


https://atcoder.jp/contests/abc362/tasks/abc362_c

<br>

### [4]我々が選択できる自由度はどれだけあるか
::: spoiler 動機
例えば最適化において「最適な戦略を選べ」と言われた時、我々が各段階で選択できるものはなんなのかを明確に認識する。
かつ、その上で、自由度が多い場合には自由度を一部縛る・無視した問題を、簡略化問題として解く。
このように、自由度を認識することは簡略化問題を見出す上で役に立つ。
:::

与えられた制約・操作について、自由度が無い部分を先に処理してしまって、その後に自由度があるところを考える。
- **制約 : max/min = M**
    - 自由度が無く、考えなくて良い部分... 全ての要素について、M以下
    - 自由度があり、考えるべき部分...どの要素を実際にMにするか？
- **制約 : 総和 = S, 2分割**
    - 自由度がある点 : 片方の総和
    - 自由度がなく、考えなくて良い部分 : もう片方の総和
### 自由度の細分化について
::: spoiler 長い
我々が実行できる操作が複数ある時、それらの性質が異質に感じることがある。また、この細分化が良い簡略化の役に立つ可能性を感じた。
#### 具体例 操作1 : 数列へのadd 操作2 : 数列への質問
操作1が数列に実際に操作をするのに対し、操作2は情報を得るクエリである。
つまり、操作2で必要な情報を入手した上で、操作1をやるという順番になる。
しかし、考察の段階では、操作2で何を聞けば良いのかなどわからない。
よってこの場合、操作2で得られうる情報が全てわかっている場合での操作1のやり方を考察すると良い。それによって、必要な情報が浮かび上がる。
例えば:木において、どの辺を辿るかを決定する
→部分木にパラメータをつけて、どれを選ぶか決める
:::


<br>

### [5]あまり考えたことのない状況について、どういう状況か？あるいは、知っている概念の組み合わせではあるが、その組み合わせは考えたことがないという時、どういう状況か？
これを掴むためには、一度サンプルを丁寧に・手続きレベルで解くのが良い。
<br>

### [9]"出来なさそう","間に合わなさそう"な操作・処理について、本当に出来ない・間に合わないと結論を下すだけの根拠があるか？

[非自明可能問題と考え方]https://hackmd.io/Jxw2YbugRnuv7StNEfod1Q

<br>

### [6]何か性質や構築について、上手くいく結果だけが手に入った時、なぜそれが上手くいくのか？
それを理解することによって、より深い理解や応用した構築に発展させられる。逆に、それを理解しないと発展は厳しい。


### [7]何かの制約が"自分が知っている解法が前提としている制約より小さい"時、その時に高速に動作するアルゴリズムは存在するか？
::: spoiler 特に、オーダーレベルで見る
備考: 小さいを絶対値的な視点で捉えてはいけない。自分が知っている解法よりオーダーが小さいことが重要である。
OOが少ない場合について考える←難しかったら、OOが一個もない場合を考える
もうちょい : 共通が少ないってなぁに→共通するペアが1つだけ　(つまり、一つの要素から辺が1本しか出ない)
OOが多い場合について考える : 難しかったら、全てOOの場合を考える
:::




<br><br>
上に、曖昧な部分とは？を述べた。以下は、「相性の良い道具・考察」への橋渡しである。
<br><br>


## 問題や条件への対処法1 : 相性の良い道具・考察手段を用いる
**不変量の導入による数学的な議論**

**明らかに条件を満たさないものの排除**
 確実に条件を満たさないもの・満たしてしまうものは、数え上げや探索の候補から外す
 →状況が単純化される
<br>


## 対処法2 : 極端なケースから見る
**言い換えをしようにも、条件が複雑に絡み合っているせいで言い換えがままならない場合がある。その場合、　絡み合っているものの中でも極端な場合に注目することによって、そこから解けていくことがある**
::: spoiler 具体例
[操作とその結果が与えられる.結果から操作の過程が一意に定まるので、操作の過程を復元しろ]https://onlinejudge.u-aizu.ac.jp/beta/room.html#virtual_RUPC2015/problems/J
[ゲーム・最適な手を選べ、結果は]https://atcoder.jp/contests/arc148/tasks/arc148_d
部分問題である、「最適なOOである必要十分条件」が複雑に絡み合うせいで綺麗な形で出せないパターン。「結果を生成するような操作列」の必要十分条件などパッと出ない
」「最適な手段である必要十分条件など、操作が絡み合うので出ない」「ゲームで勝つような操作など、この先や相手の手段と絡み合うので出ない」
→
以上のことから、「条件を見たす経路である」事を何か言い換えるのは難しそうである。しかし以前、此の条件が扱いづらいことは確かである。よって、例えば、経路の始点・終点や、経路の中で一番左上のものに注目して見る。
→実は、結果の中で一番左上を見る貪欲をすることで、通った集合が一意に復元できる。

**他、極端なものに良い・一意に決定できるような特徴が存在しなかったとしても、そこだけ全探索すればあとは一意に定まる・分離されて高速に計算できるなどのパターンが存在しうる。(区間dp)**
::: 


<br>

## 対処法3 : 独立なものの分離
**独立なものを分離すると解法につながった、というのは非常に良くあるパターンである。**
**独立なもの同士は独立に決めてしまって良い。此のことから、情報を持ってDPすることが可能になる。**
::: spoiler 具体例
他に、例えばグリッド上の正方形において、左上を固定した時、右下になりうる物は斜めの直線上にしかない。よって、それによって分離することで、グリッドの問題が直線の問題になる。
あるいは、最適化の時、独立な物同士での操作は明らかに必要ないなどの構造が見えることがある。
此のように、独立なものの分離は強力に作用することが多い。
:::

<br>

## 対処法4 : 全探索できるところは全探索
::: spoiler 　動機
**全探索は強力なツールであり、あやふやな・扱いが難しい所を定める事でどんなケースにも対応できる。よって、全探索できる部分は全探索するという姿勢が必要となる。**
**特に、部分部分に全探索を入れる(つまり、場合分け)によって解法が見えることは多々あるので、困ったら部分的にも全探索してみる姿勢は常に必要となる。**
**さらに、何も他に術がない際には、全探索するものを自分で決めて、"これを固定した時の答えはどう表されるか？"という情報から、全体を高速に計算するという過程が必要とされる時がある。この時、全探索する対象の個数が小さい必要はない。**

例えば条件が「最適な経路」などであって、かつその数学的な・極端なケースを考えてもどうしようもなさそうと思ったとする。
此の場合、全探索できるのならばすれば良い。
:::

### 全探索におけるよくある考察
#### 何を全探索するか？
[1]操作の仕方
[2]答えの形そのもの

#### 全探索で答えが出るが、間に合わない/全探索するものを絞ると、答えすら出ない

**このような場合、答えに特徴が有ることを期待する。特に最適化なら、*答えとしてあり得る例*を一つ適当に取った上で、それを改善してみる。この時、特徴的な形が現れる可能性が高い。特に、何かしらの貪欲がありそうだと感じるならば、特徴がある可能性は非常に高いだろう。
この時、収束の仕方は一意でない、つまり何パターンか異質な場合があるかもしれない。そのような場合に特徴がないと思わずに、それらを全て含めた全探索をする。**
https://onlinejudge.u-aizu.ac.jp/problems/2427


### 間に合わない、それでも全探索したいなら解の形を絞って全探索


<br>

## 対処法5 : 自明から自明への言い換え
::: spoiler 動機
**単体で見れば自明な数式に収まっているような場合でも、他の制約と組み合わせると扱いにくい・状態数が多すぎてdpできない・そもそもそれを用いても問題が解けないということはある。他に、頑張れば今のままでも解けそうだが、たとえば捕集合を考えるとはるかに楽な実装が出たということもある。
このような場合は、より議論に相応しい・問題の有利な有利な性質を活かせる考察手法を取る、つまり、相性の良い道具を選ぶ必要がある。　相性の良い道具を参照。**

**このように、一見これ以上の言い換えが無いように見える条件であっても、実はより簡単な・問題に沿った言い換えが存在するということは多々ある。よって、常に"今の言い換えが最善"と決め詰めてはいけず、"より簡潔な言い換えが存在するかも"と疑わなければならない。また、その言い換えの候補も身につけなければならない。**
:::


# よくある問題の言い換え
- 独立なものがいくつかあったら、それを次元と見なす
    - 特に、それが2つなら、2次元にprotしてみる
        - 単に、(x, y)のような2つの数字のペア
        - 整数の、特定の素因数の次数とか