# 考察のコツ
一般化しない
- 特に : xor について、 xor = 0 or notだけが気になる
    - 一般にxorが変化するか、はどうでも良くて、たいてい「xor = 0 だった時、操作を変更することで xor != 0にできるか」しか気にならない

- ゲームも、「自由度が高い中で最適を考える」の枠組みに当てはまる
    - つまり、普遍量による議論が有効
    - [例題](https://atcoder.jp/contests/arc137/tasks/arc137_c)
    
<br><br>
# 考察

- 基本的に構築・最適化と似たような物

- ラストの操作・最初の操作に注目
    - 最後にずらす...
    
- 何かを固定した時の勝敗や戦略を考える
    - 複雑な物を固定すれば、貪欲が生まれて操作が一意になったり...


- プレイヤーができる、綺麗な事実に注目
    - 構築でいう、「綺麗な事」に相当
    - ゲームも、自由度が高い場合が多いので、似た方針が役立つ
    - これを用いて必勝法を編みだせないか？
        - 猿真似戦術
        - 偏らせる

- ゲームの勝敗を決める、簡単な要素に注目
    - 極端なケースでは勝敗が決まって胃がち
        - 極端なケースとは？
        - 極端でないケースでできることとは?

<br><br>

# 負け盤面とは・勝ち盤面とはの条件を考える
- これが綺麗にわかったらもちろん解ける
- 条件を考える <- スパッと出せないなら、必要条件を積んでいく
    - 特に:次の1手で勝てない時、次の1手で負けない手が刺せない条件は？
    - 必要条件から特徴量を取り出せる場合もある
    - 必要条件を数式にすることで、「これを目指して操作すれば良い」とわかる時もある
        - それを実現できるとは限らないので、十分性は別
    - [1手負け盤面とは <- 全てについて、ペアがある](https://atcoder.jp/contests/arc131/tasks/arc131_c)
        - 貪欲とかが見えなくて、やばい
        - 1手で負けが決まる条件 <- 全てについてペアがある 
        - ペア <- 必ず偶数
        - つまり、1手で負けるならば、盤面のクッキーは偶数個
        - つまり、奇数個回された人は1手で負けることはない
        - 常に負けない
        - 初手で場合分けして終わり    


- 最初からどれが有効なのかはわからない
- 適宜実際にプレーしてみて、良さそうなのを考える
    - ある程度進めたら、条件が固まって貪欲とわかったり...
        - 最後は一意に決まるねーとか
        - ならば、最後より一個手前も一意に決定できるかもしれない
            - 最後が最悪になるようなやつを選ぶ等
        - [例題](https://atcoder.jp/contests/arc183/standings?watching=Astral__)

<br><br>

# 一致させる・させないゲーム
- 一致させる方が格段にむずい場合が多い
- != 0にする方の立場になった方が考えやすい
    - どうやれば0になるかは難しいが、どうやれば0にならないかは言えることが多い
- 「最後にずらす」ことが出来るなら、一致させない方が勝つ
    - 逆に、最後にずらせないような状況は極端なことが多い
    - もっと前に解析を進める or 帰納法で予想を示す
    - [例題](https://atcoder.jp/contests/arc148/tasks/arc148_d)
    
- 最後でなくても、操作を"ズラす"事を考えると良い
    - [途中の操作をずらす考察](https://atcoder.jp/contests/agc045/tasks/agc045_a)
        - 0になるそうされるがあったとして、 != 0にする立場でみよう
        - ある要素の使用/notをflipした時
        - 後ろで相手が作れるなら意味ない
        - 意味ない要素典型: 最初からなかったものとして見て良い
        - 終わり
- 「一致していない」ということが、状況を固定する・操作ができる根拠になったり
    - [例題](https://atcoder.jp/contests/arc094/tasks/arc094_c)
        - これの貪欲の証明
        - 先行...他を先に食べることをする(貪欲)で、それ以上にできる
        - 後攻...以下にできることを示せば良い
            - ある程度良い貪欲: 上回ってるやつを消す
                -　一致していない限りできる
                -　これをやると、いかにできることが示せる
                

<br><br>


# Grundy数の考察


## 使うと決めた時
- Grandy数を、小さいNに対して列挙する
    - そのテーブルを見て、規則性を探す
    - 規則性が見つかったら
        - (1)理由 (2)自由度 (3)更に言える事　を考える
            - 理由...構造の理解、(2), (3)に繋がりやすくなる
    - あるいは：愚直計算の高速化
        - mexとなると集合を管理したい -> 差分更新と相性良い
    - [例題](https://atcoder.jp/contests/arc091/tasks/arc091_d)
        - A % K = 0の時、綺麗な形
            - 理由は?
                - grandy数の定義より、前に[0, A / K)が固まっているから
                    - その理由は？
                    - わからない
            - A % K != 0 の時に更に言えることはないか？
                -  こちらでも、ほとんど固まっている状況は変化しないので..
                    - 前 A / K項を考えることで...
                - 漸化式が立った




## Grundy数への帰着
### 1回の操作による変化に着目
- 分裂すると大変
- 片方を消費するとかなら分裂しない
    - [例題](https://atcoder.jp/contests/arc013/tasks/arc013_3)
<br><br>

# xor = 0　

- xor と + の偶奇は一致

- a xor b = 0 ⇔  a = b

- a1 xor a2 xor a3 ... xor an について、sum ai の半分をを超える ai があったら、 xor != 0
- 他のxor = max
    - xorは+以下
        - プラスでさえ、右辺に届かない
- [例題](https://atcoder.jp/contests/arc105/tasks/arc105_d)

    - n が偶数なら、先手は必ず半数の山を作れる
        - 全ての要素が 偶数個ずつ　ある場合、過半数の山を作るのは妨害できる
        - そうでないなら、必ず過半数の山を作れる
    - n が奇数なら、後手は必ず過半数の山を作れる



<br><br>

# Strategy strealing
- 状態の遷移に包含関係がある時
    - 共通している遷移先に後手必勝がある: 先手はその遷移を選んで勝つ
    - 共通している遷移先が全て先手必勝: 
        - 先手は、必ずそういう遷移を選ばざるを得ない状況に遷移すると勝てる: そういう遷移があったら必ず選ぶ
        - 先手は、共通遷移先に後手必勝がある盤面に遷移すると負ける: そういう遷移があっても必ず選ばない

- いつ考える:
    - grundy数がどうしても無理・そもそも多山ではない

[例題](https://atcoder.jp/contests/arc137/tasks/arc137_c)

# 猿真似
- 必要なこと: 対象かつ独立な盤面を2つ用意できて、かつ後攻の時
    - そもそもgrundy数が必要ないことに注目
- いつ考える:
    - そもそも問題がそういう構造
    - 独立性を自分で作れて、初手の時、自ら作る
    - grundy数がどうしても無理・そもそも多山ではない・こっちの方が楽なことは多い
        - [最初に山を2つにすると、対象かつ後攻になれる](https://atcoder.jp/contests/abc278/submissions/61054406)   
            - L = R かつ　mod2が一致してないと、どっちかが奇数になってダメ -> O(N^2)探索できる
            -