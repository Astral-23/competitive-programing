# 大方針

## 非自明を無くし、自明にする
:::spoiler 動機
非自明があると、議論を発展させるのが困難。かつ、簡単な非自明から詰めていくことで問題が解けることは多数。よって、問題を整理し、非自明を見つけた時は毎回そこに戻る。
:::

**教訓**
- **証明・議論の過程で、定義が明らかでない言葉を使わない/明らかで無いことを断言しない**
    - **数学で書けるなら数学で書く**
    - **特に、何か日本語の条件を日本語から数式にすると議論が進みやすく、積極的に行うべき**
        - [例題](https://atcoder.jp/contests/arc082/tasks/arc082_d)
    - 深く考えずに言い換えをしない(例:色が違う  → swap可能...本当に同値か? 言い換えは⇔でないといけない
    
- **議論に曖昧な事を挟んでは行けないというだけで、疑問は全て解消しなければならないわけではない。そうやっても解けるし、その疑問はそもそも綺麗に答えが出ないかもしれない。**
    - 特に、何か言える事・一意に言える事を見つけたら、今見ている事がよくわからなくても、そっちに専念すべき
- **あくまで目的は道具・計算手段であり、その証明・理論ばかりやっても手がでない場合が多い**

- **反射的な勘は大切にした方が良い**
    - 真っ先に見た方が良いかも
    - 特に初手は大事で、初手のローテも大事
    - **ただし、勘から始まった考察で難しいところがあった・詰まったら、ちゃんと普段の整理を再開すること**

- **問題の言い換えは、言い換えた先が簡単になっていなかったなら戻ることが大切**
    - 解法の切り替えは慣れているが、言い換えた問題を元に戻すのは気付きにくい
        - 言い換え元も先もある程度難しく、しかし片方は非常に難しいという時、ローテをちゃんとしないと運ゲーになってしまう
        - 勘がいい変えろといったら積極的に言い換えるべきだが、その先で解けなかったら戻る
<br>

## それぞれの問題に対象の良い道具・考え方を学ぶ
:::spoiler 動機
例えば、座標軸について定義をきちんと述べられる学生が、いきなり幾何の問題をスラスラ解けるかと言われたらそうではない。道具を学ぶことも大切。
「OOという手法が存在して、それで解ける感じがしたので近づけてみたら解ける形でした！」という感じ以外の向き合い方を知らない。
よって、問題の状況を扱える道具を知る必要がある。
:::
**教訓**

- **具体的な解法の検討の前に必ず整理がくる**
    - 問題を簡潔にするような性質が無いか。
        - 独立性、言い換え、条件の言い換え


- **最初にやることの予定・幾つかの解法を立て、試していく。**
    - **最初から一つの解法に集中せず、序盤は選択肢を広げる事に集中する。**
    - いきなり全てを網羅することは難しいので、途中でこれいいんじゃないかと思ったら追加する
    - **問題の整理**
        - **自由度の把握**
            - **何が自由で、何を決定する・考える問題なのか把握する**
                - 既存の問題に近いことや、問題の構造がわかりやすくなる
                - [例題](https://atcoder.jp/contests/arc010/submissions/57229679)
                    - 人の集合と、距離を決める問題
                    - 距離...貪欲で良い
        - **目標の整理: 問題を段階に分ける**
            - 集合を選んで、その中で最適化する...
            - 集合を選んで、それが残るように操作する...
                - すると、先に考えるべき判定問題(可能か?) / 最適化問題(集合固定した時？) が見えやすくなる
                - [例題](https://atcoder.jp/contests/arc092/tasks/arc092_c)
                - 最後に残す集合を選んで、それを残す
                    - 残せる集合はどのような集合？
                        - もはや目的が構築・判定になったことを意識
                            - 不変量等、あった道具を使う
        - **条件の数式化・整理**
            - 日本語を直す。特に、**日本語の条件は数式にする**
                - 判定が単調とか、貪欲できるとか、そう言うのに気づく1歩
                - ゲームの終了条件...もうできないとは、貪欲できるとは...
        - **答えを変えない範囲での単純化のための言い換え**
        - **一意な物の前計算・それから言えることの考察**
            - 影響の前計算
            - 選ばれない選択肢...最初から無いとしてはダメか？
        - **独立な構造の分離**
        - **条件の分離**

    - **似た・簡略化⇔固定化された・判定問題を考える**
        - 簡略化・制約無視・判定...最適化頻出
        - 固定...数え上げ・最適化頻出
          - 数え上げ:特に、複雑にしている要素を固定すると良い
              - 扱うのが難しい
              - これさえなければ解ける
          - そういう要素さえ固定すれば大体解ける
            - 役立つ結論が得られたかが問題
          - 最適化...一部の結果を固定した時の答えを考える
        - 似た...ともに頻出
        
          
        
 - **何かしら言い換えた・整理をしたら、状況として何が変わったのか明文化し、必要な整理をもう一度する**
    - 整理...もう考えなくて良い状況・そして、次に考えるべき状況が変化しているので把握
    - 問題を単に言い換えただけで結果が得られる場合もある
        - 独立性の発見・貪欲の発見
    - 最適化なら: 探索しないとしても良い対象はないか？
        - 明らかに損
        - 別で代用できる
        - そう限っても最適解がある

    - [例題](https://atcoder.jp/contests/agc040/tasks/agc040_b)
        - 集合を決め打った時のスコアを出した
        - 後、場合分けして、集合に含まれる要素を幾つかだけ決め打った
        - そうしたら、もう一度、決め打った上で集合を振り分けた時の答えを出す
            - これによって貪欲がわかるし、これをすぐにしないので苦労した苦労した
            
            
- **問題が解けずとも、一部の情報だけなら手に入る、といったことでも考察が進む**
        - あとは分かってない情報について解けば良い。
        - 特定のケースを考えなくて良くなるなら、それは何かを考えて、省く 

- **手詰まったら、言い換え・問題の整理に一度戻る**
    - **問題の整理・言い換えは解法の最初にくる**
- **成立する事実の発見 -> 理由の考察 -> その手法の使える必要条件の追加の順を踏襲する**
    - 　問題の解法にも言える（この問題がこれで解ける、事実->
- **一旦注目する対象を定めたら、目的が変わったことを意識する**
    - 一旦判定問題を解くと決めたら、判定問題に相性の良い解法を選択する
    - 目的: 解法で覚えているので
- **考える問題を変えたら、変わらない熱量でその問題を考える**
    - この問題が解けたら元も解けるという時、簡単にその問題が解けなかったからといってその線を投げ出さない

- **問題を言い換えたとき、それは問題を難しくしていないか、可能性を明記する**
    - 与えられたパラメータについて解け
        - パラメータを固定しても、難しくなることはない
    - 全ての選択肢の中で、最小値を出せ
        - 全ての選択肢について値を出して、min(value)をとる...確かにこれが解ければ元も解けるが、しかし難しくしている可能性がある
            - 答え二分探索して、それが可能な選択肢を選ぶ等の高速化 [例題](https://atcoder.jp/contests/abc370/tasks/abc370_f)
    - 最小値になっているか判定せよ
        - 最小値を求めて一致判定、は難しくしている可能性

    - **往々にして、直接出せと言われていない値を出すのは難しくしている可能性があり、解けない場合がある**
    
- **使っていない制約を考える**
    - 今使い道がわからない、使えそうな制約・定理はメモしよう！
        - 忘れがちなので
    - 整理によって制約が増えた時も考える
    - その制約が成立する時と成立しない時を見比べるとなんか際立つ気がする(見比べる考察)
        - よくわかんない時も多々ある

- **マジで手が出ない時 -> 簡単にした問題を考えよう**
    - なんか思い出すこともあるし、応用できる場合もある
- **同値な言い換えは1通りとは限らない**
    - 必要十分条件がわかったとて、今ので無理なら、より使いやすい必要十分条件を考える
- **解法を元に、その解法に必要な要素を考え、それを揃えると言った発想で解法にありつく場合がある**
    - 例えば: 複雑な状況で言い換えもない時、全探索なら基本使えるので全探索したい
        - 状態が少ないことが条件なので、状態を絞れるような貪欲を考えよう、等
    - **このために、解法がどのような状況に向いているかのほか、何が必要なのかも考えておく**

- **知ってる解法への帰着: 解法を改造するのではなく、問題が解法に寄るように改造する方がうまくいきやすい**
    

- **何かについて、複雑になりそうと言った予想で終わらせずに、実際に複雑になる・或いはならない事を必ず確認する**

- **必要条件を探るのに実験は有効だが、実験の結果から考えた、ある程度の確信がない状態での実装はダメ**
    - 1発で必要十分条件を得られるなど確率が低過ぎ
    - 実験が予想とマッチするか見る
    - ある程度大きいと確認に手間取るので、小さい方から見ていく


- **ちゃんとは知らない有名問題への帰着は危険**
    - 特に、有名問題の特殊版になっている時、全く異なる・全探索よりの解法を取れる場合がある

- **0.5の進捗はあっても答えに繋がらないという線はあるので、0.5が見えたからと言って実装を始めない**

- **わからない・未整理な事柄を強調するために、予定と分かってないことは分けて書いて考察**

- **実装に入る前に、係数の式や実装とかまでちゃんと書いてから入る**
    - 添字のバグとこれが混ざると辛い
    - ad-hocでやると工夫が生まれづらい
        - 改善の入るところを残さないといけない

- **自由度と結果が"離れている"と、どう自由度を定めたら良いのかわからないので、近づけよう**
    - 操作は辺なのに、条件は頂点<-言い換え
    - 操作は集合を作る、関数は集合に対する関数<-操作を値についての関数にする、作れる集合の必要十分だしてそこで議論する...

## ad-hocな考察をする
- **基本はしない**
- **最適化: 無駄な探索をしない**
    - 無駄な・非効率な探索はどのような探索か
    - そこから、意味のある探索だけをする
        - [例題](https://www2.ioi-jp.org/camp/2014/2014-sp-tasks/2014-sp-d2-bottle-review.pdf)
<br>

## WA
## 既にあるものを利用する、という解法は怪しい
- ない可能性がある
    - [組んでいたドミノを解体して再構成<-存在しない場合](https://atcoder.jp/contests/agc008/tasks/agc008_c)
<br><br>

# mdの構造

## 条件の整理
**問題を見た時、いきなり解法の考察に入る前にするべきこと**

https://hackmd.io/_AEApAX1TLeIJWO2950gsA

## 操作の整理
:::spoiler 動機
**条件の整理と同様に、操作にも整理がいる。及び、条件の整理とは少し異なるテクニック・典型がある。**
:::
https://hackmd.io/2QBFECCPSuycSvEPhwmwLA

## 高速化
:::spoiler 動機
**「正しい答えを求められるロジックは立ったが、そこままだと計算量が間に合わない」という時、それで解けないのは勿体無い。
かつ、問題によっては高速化そのものが主題となっていることも多々ある。この時、高速化の良くある手法とは？**
:::
https://hackmd.io/xcx7zFLXQdGE4tdth5_5nQ

## 相性の良い道具

https://hackmd.io/0c3-xEr4S927eFHg0lyiyQ
<br>


## まともでない解法
簡略化を十分に行ってもマージできない・十分な簡略化すら解けないと思った場合

[1]極端なケース・情報をみましたか？
俺は忘れがち
そこから解ける場合がある
[2]簡略化とか考えずに、なんか問題を直に考えたら解ける(上界など)ことを考える。

「答えそのもそがもとまらない」より「間に合わないけどとりあえず答えが出せる」から出発した方が当たること多い

最適化デバッグ典型 : 選択肢を狭めるタイプの仮定を施した状態で最適解よりも良い結果を出力されたなら、仮定が間違っていること以前に、計算そのものがどこかでやってはいけないことをしている
<br>

## 役に立ちそうな教訓
- **既に何回も言われた教訓を再度唱えてもありがたみは少ないので、何かを付け加える**
    - なぜ今回のケースでもその教訓が役に立ったのかを考える。そして、新たな典型にする・理論の地盤を固める
    
- **曖昧な言葉・否定形の言葉で記述された教訓は役に立たないので、必要に応じて具体化する**
    - **証明・議論で、定義が明らかでない言葉を使わない** ...「回り込むことより」、等
    - **しないで..では、何をすることを期待している？**
    - **確認して...どの様な結果を期待して対象を見れば良い？**
    - **して...具体的に何をすれば良いのかわからないのは厳しい 極力具体で書いて**
       -多用する補助関数には1文字nameをつける事を厭わない
    
- **答えが出せないadhocに時間をかけるより、答えが出せるが遅い全探索から出発**
    - 高速化の道具は多い: 答え固定にぶたん、dp、 slope trick, 全探索の高速化...

- **解説と同じ方針でかつ解けなかったなら、"より良いその方針の解法とは"について考える**
    - 少なくとも、解説のそれは良くて、自分のは悪い
    - 評価: その方針の目的と、その結果
- **何故か上手くいかない・答えが小さいらしい時は、その理由を考える(適当な上界が達成できない理由など)。**
<br>

- **お気持ち系の教訓は、既存の手法を使う場合には役に立たないがちだが、新たな手法を使う・既存の手法を応用するときに役に立ちがち**

- **問題文に文字が登場する時、考察にその値を使うなら同じ文字を使うべき**
    - 書き直したく無いが、実装重い時は一致していて欲しい


- **ooで解ける問題がある、という教訓はあまり役に立たない**
    - どういう時に使える？
        - 必要条件とか
## 重実装構築


https://atcoder.jp/contests/abc358/tasks/abc358_f
初期化...全てを"行けるマス"で初期化するより、全てを"壁"で初期化した方がはるかに楽
    - 壁を後から作ると、外枠を置換してしまう事がある。
    - とりあえず、初期化は壁でするのがうまくいく事が多い？
    
- 再帰関数・呼び出し回数見積もり
    - 探索対象事にsumを取る -> 再帰の前半共通する場合大変
        - 探索対象ごとに呼び出し回数が異なる場合も
    - 探索対象ごとにsumを取る事に拘らず、単に、関数が何回呼び出されるかを、関数のreturn条件から（呼び出しの質に応じて場合分けして）
    考える
        - [そういう](https://atcoder.jp/contests/abc386/editorial/11703)
    
- $\sum 2通りで分岐するやつ$
    - 分岐の条件を2つ相反する感じに持ってくると、（条件1の時のsum) + (条件2の時のsum) = $\sum (分岐2つのsum)$ となって良いね
        - 条件を適当に固定した時のsumを上から抑える際に、得られたものより1/2のが欲しいな〜となった時
            - あるいは、1/?
## コンテスト前 best practice
深呼吸