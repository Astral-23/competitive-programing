---
data:
  _extendedDependsOn:
  - icon: ':heavy_check_mark:'
    path: Algorithm/lowlink.hpp
    title: lowlink
  - icon: ':question:'
    path: Utility/template.hpp
    title: "verify\u7528\u30C6\u30F3\u30D7\u30EC\u30FC\u30C8"
  _extendedRequiredBy: []
  _extendedVerifiedWith: []
  _isVerificationFailed: false
  _pathExtension: cpp
  _verificationStatusIcon: ':heavy_check_mark:'
  attributes:
    '*NOT_SPECIAL_COMMENTS*': ''
    PROBLEM: https://judge.yosupo.jp/problem/two_edge_connected_components
    links:
    - https://judge.yosupo.jp/problem/two_edge_connected_components
  bundledCode: "#line 1 \"verify/\\u4e8c\\u91cd\\u9802\\u70b9\\u9023\\u7d50\\u6210\\\
    u5206\\u5206\\u89e3.test.cpp\"\n#define PROBLEM \"https://judge.yosupo.jp/problem/two_edge_connected_components\"\
    \n#line 1 \"Utility/template.hpp\"\n#include <bits/stdc++.h>\nusing namespace\
    \ std;\nusing ll = long long;\n#define rep(i, s, t) for (ll i = s; i < (ll)(t);\
    \ i++)\n#define rrep(i, s, t) for (ll i = (ll)(t) - 1; i >= (ll)(s); i--)\n#define\
    \ all(x) begin(x), end(x)\n\n#define TT template <typename T>\nTT using vec =\
    \ vector<T>;\ntemplate <class T1, class T2> bool chmin(T1 &x, T2 y) {\n    return\
    \ x > y ? (x = y, true) : false;\n}\ntemplate <class T1, class T2> bool chmax(T1\
    \ &x, T2 y) {\n    return x < y ? (x = y, true) : false;\n}\n/*\n@brief verify\u7528\
    \u30C6\u30F3\u30D7\u30EC\u30FC\u30C8\n*/\n#line 1 \"Algorithm/lowlink.hpp\"\n\
    struct lowlink {\n    using vi = vec<int>;\n    using vvi = vec<vi>;\n    using\
    \ pii = pair<int, int>;\n    \n    int n;\n    vvi tr;\n    vi low, in;\n    vec<pii>\
    \ bridges;\n    vec<int> joints;\n\n    lowlink(vvi g) : n(g.size()) {\n     \
    \   low = vi(n, 1001001001);\n        in = vi(n, -1);\n        tr.resize(n);\n\
    \    \n        \n        int t = 0;\n        int r = 0;\n        auto dfs = [&](auto\
    \ f, int v, int p) -> void {\n            in[v] = low[v] = t++;\n            bool\
    \ duplication = false;\n            for(int to: g[v]) {\n                if(in[to]\
    \ == -1) {\n                    tr[v].push_back(to);\n                    f(f,\
    \ to, v);\n                }\n                else {\n                    if(to\
    \ != p) chmin(low[v], in[to]);\n                    else if(duplication == false)\
    \ duplication = true;\n                    else {\n                        chmin(low[v],\
    \ in[to]);\n                    }\n                }\n            }\n\n      \
    \      for(int to : tr[v]) {\n                chmin(low[v], low[to]);\n      \
    \      }\n            //\u90E8\u5206\u6728\u306B\u3064\u3044\u3066\u3001low/in\u304C\
    \u6C42\u307E\u3063\u305F\n            bool isjoint = false;\n            for(int\
    \ to : tr[v]) {\n                if(low[to] > in[v]) bridges.emplace_back(v, to);\n\
    \                if(low[to] >= in[v]) isjoint = true;\n            }\n\n     \
    \       if(v != r && isjoint) joints.push_back(v);\n            else if(v == r)\
    \ {\n                if(tr[v].size() > 1) joints.push_back(v);\n            }\n\
    \        };\n\n        rep(i, 0, n) if(in[i] == -1) {\n            r = i;\n  \
    \          dfs(dfs, i, -1);\n        }\n    }\n\n};\n\n/*\n@brief lowlink\n@docs\
    \ doc/lowlink.md\n*/\n#line 4 \"verify/\\u4e8c\\u91cd\\u9802\\u70b9\\u9023\\u7d50\\\
    u6210\\u5206\\u5206\\u89e3.test.cpp\"\n\nusing pii = pair<int, int>;\nint main()\
    \ {\n    int n, m;\n    cin >> n >> m;\n    vec<vec<int>> g(n);\n    rep(i, 0,\
    \ m) {\n        int a, b;\n        cin >> a >> b;\n        g[a].push_back(b);\n\
    \        g[b].push_back(a);\n    }\n\n    lowlink llink(g);\n    vec<int> seen(n,\
    \ 0);\n    vec<int> idx(n, -1);\n    int t = 0;\n    set<pii> bs;\n    for(auto\
    \ [l, r] : llink.bridges) {\n        bs.insert(pii(l, r));\n        bs.insert(pii(r,\
    \ l));\n    }\n\n    auto dfs = [&](auto f, int v) -> void {\n        seen[v]\
    \ = 1;\n        idx[v] = t;\n\n        for(int to : g[v]) if(!seen[to]) {\n  \
    \          if(!bs.count(pii(v, to))) {\n                f(f, to);\n          \
    \  }\n        }\n    };\n\n    rep(i, 0, n) if(!seen[i]) {\n        dfs(dfs, i);\n\
    \        t++;\n    }\n\n    vec<vec<int>> vs(n);\n    rep(i, 0, n) vs[idx[i]].push_back(i);\n\
    \n    int c = 0;\n    rep(i, 0, n) if(!vs[i].empty()) c++;\n\n    cout << c <<\
    \ endl;\n\n    rep(i, 0, n) {\n        if(vs[i].size() == 0) continue;\n     \
    \   cout << vs[i].size() << \" \";\n        for(auto v : vs[i]) cout << v << \"\
    \ \";\n        cout << '\\n';\n    }\n}\n"
  code: "#define PROBLEM \"https://judge.yosupo.jp/problem/two_edge_connected_components\"\
    \n#include \"../Utility/template.hpp\"\n#include \"../Algorithm/lowlink.hpp\"\n\
    \nusing pii = pair<int, int>;\nint main() {\n    int n, m;\n    cin >> n >> m;\n\
    \    vec<vec<int>> g(n);\n    rep(i, 0, m) {\n        int a, b;\n        cin >>\
    \ a >> b;\n        g[a].push_back(b);\n        g[b].push_back(a);\n    }\n\n \
    \   lowlink llink(g);\n    vec<int> seen(n, 0);\n    vec<int> idx(n, -1);\n  \
    \  int t = 0;\n    set<pii> bs;\n    for(auto [l, r] : llink.bridges) {\n    \
    \    bs.insert(pii(l, r));\n        bs.insert(pii(r, l));\n    }\n\n    auto dfs\
    \ = [&](auto f, int v) -> void {\n        seen[v] = 1;\n        idx[v] = t;\n\n\
    \        for(int to : g[v]) if(!seen[to]) {\n            if(!bs.count(pii(v, to)))\
    \ {\n                f(f, to);\n            }\n        }\n    };\n\n    rep(i,\
    \ 0, n) if(!seen[i]) {\n        dfs(dfs, i);\n        t++;\n    }\n\n    vec<vec<int>>\
    \ vs(n);\n    rep(i, 0, n) vs[idx[i]].push_back(i);\n\n    int c = 0;\n    rep(i,\
    \ 0, n) if(!vs[i].empty()) c++;\n\n    cout << c << endl;\n\n    rep(i, 0, n)\
    \ {\n        if(vs[i].size() == 0) continue;\n        cout << vs[i].size() <<\
    \ \" \";\n        for(auto v : vs[i]) cout << v << \" \";\n        cout << '\\\
    n';\n    }\n}"
  dependsOn:
  - Utility/template.hpp
  - Algorithm/lowlink.hpp
  isVerificationFile: true
  path: "verify/\u4E8C\u91CD\u9802\u70B9\u9023\u7D50\u6210\u5206\u5206\u89E3.test.cpp"
  requiredBy: []
  timestamp: '2024-08-16 18:32:51+09:00'
  verificationStatus: TEST_ACCEPTED
  verifiedWith: []
documentation_of: "verify/\u4E8C\u91CD\u9802\u70B9\u9023\u7D50\u6210\u5206\u5206\u89E3\
  .test.cpp"
layout: document
redirect_from:
- "/verify/verify/\u4E8C\u91CD\u9802\u70B9\u9023\u7D50\u6210\u5206\u5206\u89E3.test.cpp"
- "/verify/verify/\u4E8C\u91CD\u9802\u70B9\u9023\u7D50\u6210\u5206\u5206\u89E3.test.cpp.html"
title: "verify/\u4E8C\u91CD\u9802\u70B9\u9023\u7D50\u6210\u5206\u5206\u89E3.test.cpp"
---
